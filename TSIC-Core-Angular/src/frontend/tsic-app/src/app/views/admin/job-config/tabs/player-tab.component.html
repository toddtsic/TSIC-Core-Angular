@if (svc.player()) {
  <div class="tab-panel">
    <div class="form-section">
      <h6 class="section-title">Player Registration Settings</h6>

      <div class="d-flex align-items-center gap-3 p-3 rounded-2 mb-3"
           [style.background]="bRegistrationAllowPlayer() ? 'rgba(var(--bs-success-rgb), 0.1)' : 'rgba(var(--bs-danger-rgb), 0.1)'"
           [style.border]="'1px solid ' + (bRegistrationAllowPlayer() ? 'rgba(var(--bs-success-rgb), 0.3)' : 'rgba(var(--bs-danger-rgb), 0.3)')">
        <div class="form-check form-switch mb-0">
          <input type="checkbox" class="form-check-input" id="bAllowPlayer" role="switch"
            [ngModel]="bRegistrationAllowPlayer()"
            (ngModelChange)="bRegistrationAllowPlayer.set($event); onFieldChange()" />
          <label class="form-check-label fw-semibold" for="bAllowPlayer">
            <i class="bi me-1" [ngClass]="bRegistrationAllowPlayer() ? 'bi-person-check' : 'bi-person-x'"></i>
            Allow Player Registration
          </label>
        </div>
        <small class="text-secondary">
          @if (bRegistrationAllowPlayer()) {
            Player registration is enabled — families can register players.
          } @else {
            Player registration is disabled — families cannot register players.
          }
        </small>
      </div>

      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label">Registration Form Name</label>
          <input type="text" class="form-control"
            [ngModel]="regformNamePlayer()"
            (ngModelChange)="regformNamePlayer.set($event); onFieldChange()" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Core Registration Form</label>
          <input type="text" class="form-control"
            [ngModel]="coreRegformPlayer()"
            (ngModelChange)="coreRegformPlayer.set($event); onFieldChange()" />
        </div>
      </div>
    </div>

    <div class="form-section">
      <h6 class="section-title">Multi-Player Discount</h6>
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label">Minimum Players</label>
          <input type="number" class="form-control"
            [ngModel]="playerRegMultiPlayerDiscountMin()"
            (ngModelChange)="playerRegMultiPlayerDiscountMin.set($event); onFieldChange()" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Discount Percent (%)</label>
          <input type="number" class="form-control" step="0.01"
            [ngModel]="playerRegMultiPlayerDiscountPercent()"
            (ngModelChange)="playerRegMultiPlayerDiscountPercent.set($event); onFieldChange()" />
        </div>
      </div>
    </div>

    <div class="form-section">
      <h6 class="section-title">Confirmation &amp; Policy Text</h6>
      <div class="row g-3">
        <div class="col-12">
          <label class="form-label">Confirmation Email</label>
          <ejs-richtexteditor
            [value]="playerRegConfirmationEmail()"
            [toolbarSettings]="rteTools"
            [height]="rteHeight"
            [enableHtmlSanitizer]="false"
            (change)="onRteChange('playerRegConfirmationEmail', $event)">
          </ejs-richtexteditor>
        </div>
        <div class="col-12">
          <label class="form-label">Confirmation On-Screen</label>
          <ejs-richtexteditor
            [value]="playerRegConfirmationOnScreen()"
            [toolbarSettings]="rteTools"
            [height]="rteHeight"
            [enableHtmlSanitizer]="false"
            (change)="onRteChange('playerRegConfirmationOnScreen', $event)">
          </ejs-richtexteditor>
        </div>
        <div class="col-12">
          <label class="form-label">Refund Policy</label>
          <ejs-richtexteditor
            [value]="playerRegRefundPolicy()"
            [toolbarSettings]="rteTools"
            [height]="rteHeight"
            [enableHtmlSanitizer]="false"
            (change)="onRteChange('playerRegRefundPolicy', $event)">
          </ejs-richtexteditor>
        </div>
        <div class="col-12">
          <label class="form-label">Release of Liability</label>
          <ejs-richtexteditor
            [value]="playerRegReleaseOfLiability()"
            [toolbarSettings]="rteTools"
            [height]="rteHeight"
            [enableHtmlSanitizer]="false"
            (change)="onRteChange('playerRegReleaseOfLiability', $event)">
          </ejs-richtexteditor>
        </div>
        <div class="col-12">
          <label class="form-label">Code of Conduct</label>
          <ejs-richtexteditor
            [value]="playerRegCodeOfConduct()"
            [toolbarSettings]="rteTools"
            [height]="rteHeight"
            [enableHtmlSanitizer]="false"
            (change)="onRteChange('playerRegCodeOfConduct', $event)">
          </ejs-richtexteditor>
        </div>
        <div class="col-12">
          <label class="form-label">COVID-19 Waiver</label>
          <ejs-richtexteditor
            [value]="playerRegCovid19Waiver()"
            [toolbarSettings]="rteTools"
            [height]="rteHeight"
            [enableHtmlSanitizer]="false"
            (change)="onRteChange('playerRegCovid19Waiver', $event)">
          </ejs-richtexteditor>
        </div>
      </div>
    </div>

    @if (svc.isSuperUser()) {
      <div class="form-section">
        <h6 class="section-title">
          <i class="bi bi-shield-lock me-1"></i>
          Player Settings (SuperUser)
        </h6>
        <div class="row g-3">
          <div class="col-md-4">
            <div class="form-check">
              <input type="checkbox" class="form-check-input" id="bInsurancePlayer"
                [ngModel]="bOfferPlayerRegsaverInsurance()"
                (ngModelChange)="bOfferPlayerRegsaverInsurance.set($event); onFieldChange()" />
              <label class="form-check-label" for="bInsurancePlayer">Offer RegSaver Insurance</label>
            </div>
          </div>
          <div class="col-md-4">
            <label class="form-label">Mom Label</label>
            <input type="text" class="form-control"
              [ngModel]="momLabel()"
              (ngModelChange)="momLabel.set($event); onFieldChange()" />
          </div>
          <div class="col-md-4">
            <label class="form-label">Dad Label</label>
            <input type="text" class="form-control"
              [ngModel]="dadLabel()"
              (ngModelChange)="dadLabel.set($event); onFieldChange()" />
          </div>
        </div>
      </div>
    }

  </div>
}

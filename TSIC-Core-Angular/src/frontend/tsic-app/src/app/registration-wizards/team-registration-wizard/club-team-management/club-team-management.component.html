<div class="club-team-management">
    <!-- Header -->
    <div class="mb-4 d-flex flex-column flex-sm-row align-items-sm-center justify-content-between gap-2">
        <div>
            <h3 class="mb-1 d-flex align-items-center flex-wrap gap-2">
                <i class="bi bi-collection me-1"></i>
                <span>Manage Club Teams</span>
                <span class="badge bg-light text-dark border">{{ clubName() || 'Your Club' }}</span>
            </h3>
            <p class="text-muted small mb-0">
                View and manage teams in your club library.
            </p>
        </div>
        <button type="button" class="btn btn-primary btn-sm align-self-start" (click)="requestAddTeam()">
            <i class="bi bi-plus-circle me-1"></i>Add Team
        </button>
    </div>

    <!-- Error Alert -->
    @if (errorMessage()) {
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <i class="bi bi-exclamation-triangle me-2"></i>{{ errorMessage() }}
        <button type="button" class="btn-close" (click)="errorMessage.set(null)"></button>
    </div>
    }

    <!-- Loading -->
    @if (isLoading()) {
    <div class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-2 text-muted">Loading teams...</p>
    </div>
    } @else {
    <!-- No Teams -->
    @if (teams().length === 0) {
    <div class="alert alert-info text-center py-5">
        <i class="bi bi-inbox fs-2 mb-2"></i>
        <p class="mb-0">No teams in your club library yet.</p>
    </div>
    } @else {
    <!-- Teams Table -->
    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Team Name</th>
                    <th class="d-none d-md-table-cell">Graduation Year</th>
                    <th class="d-none d-md-table-cell">Level of Play</th>
                    <th class="text-center">Status</th>
                    <th class="text-center">Used?</th>
                </tr>
            </thead>
            <tbody>
                @for (team of teams(); track team.clubTeamId) {
                <tr>
                    <td class="fw-semibold">{{ team.clubTeamName }}</td>
                    <td class="d-none d-md-table-cell text-muted">{{ team.clubTeamGradYear }}</td>
                    <td class="d-none d-md-table-cell text-muted">{{ team.clubTeamLevelOfPlay }}/5</td>
                    <td class="text-center">
                        @if (team.isActive) {
                        <span class="badge bg-success">Active</span>
                        } @else {
                        <span class="badge bg-secondary">Inactive</span>
                        }
                    </td>
                    <td class="text-center">
                        @if (team.hasBeenUsed) {
                        <span class="badge bg-info">Yes</span>
                        } @else {
                        <span class="badge bg-light text-dark">No</span>
                        }
                    </td>
                </tr>
                }
            </tbody>
        </table>
    </div>
    }
    }

    <!-- Add New Team Modal -->
    <app-club-team-add-modal #addTeamModal [clubName]="clubName()"></app-club-team-add-modal>
</div>
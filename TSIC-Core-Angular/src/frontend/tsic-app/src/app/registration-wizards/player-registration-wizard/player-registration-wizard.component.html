<main class="container py-4" aria-labelledby="rw-title">
    <div class="row justify-content-center">
        <div class="col-lg-9 col-xl-8">
            <div class="card shadow-lg border-0 card-rounded mb-4">
                <div class="card-header gradient-header text-center py-4 border-0">
                    <h2 id="rw-title" class="mb-0 fw-bold">Player Registration</h2>
                    <p class="mb-0 mt-2 opacity-75 small">Step {{ currentIndex() + 1 }} of {{ steps().length }}</p>
                </div>
            </div>

            <progress class="w-100 mb-3" [value]="progressPercent()" max="100">{{ progressPercent() }}%</progress>

            <nav class="rw-steps mb-3" aria-label="Registration steps">
                <ol class="rw-steps-list">
                    @for (s of steps(); track s; let i = $index) {
                    <li class="rw-step" [class.active]="i === currentIndex()" [class.completed]="i < currentIndex()"
                        [attr.aria-current]="i === currentIndex() ? 'step' : null">
                        <span class="rw-step-index">{{ i + 1 }}</span>
                        <span class="rw-step-label">{{ stepLabels[s] }}</span>
                    </li>
                    }
                </ol>
            </nav>

            <div class="d-flex justify-content-between align-items-center mb-4">
                <button type="button" class="btn btn-outline-secondary" (click)="back()"
                    [disabled]="currentIndex() === 0" aria-label="Go back to previous step">
                    Back
                </button>
                <span class="text-muted small">Current: {{ stepLabels[currentStepId()] }}</span>
            </div>

            @switch (currentStepId()) {
            @case ('start') {
            <app-rw-start-choice (selected)="onStartChoice($event)" />
            }
            @case ('edit-lookup') {
            <app-rw-edit-lookup (back)="back()" (next)="next()" />
            }
            @case ('players') {
            <app-rw-player-selection (next)="next()" />
            }
            @case ('constraint') {
            <app-rw-constraint-selection (back)="back()" (next)="next()" />
            }
            @case ('teams') {
            <app-rw-team-selection (back)="back()" (next)="next()" />
            }
            @case ('forms') {
            <app-rw-player-forms (back)="back()" (next)="next()" />
            }
            @case ('review') {
            <app-rw-review (back)="back()" (next)="next()" />
            }
            @case ('payment') {
            <app-rw-payment (back)="back()" (submitted)="next()" />
            }
            }
        </div>
    </div>
</main>
/* ============================================
   Syncfusion Grid Theme Overrides
   Applies glassmorphic design system to Syncfusion components
   ============================================ */

/* Grid Container */
.e-grid {
  background: var(--bs-card-bg) !important;
  border: 1px solid var(--border-color) !important;
  border-radius: var(--bs-border-radius) !important;
  box-shadow: var(--bs-box-shadow-sm) !important;

  // Glassmorphic effect
  backdrop-filter: blur(20px) !important;
  -webkit-backdrop-filter: blur(20px) !important;

  // Override Syncfusion's hardcoded #fff on the table element
  .e-table {
    background-color: var(--bs-body-bg) !important;
  }

  // Override Syncfusion's hardcoded #fff on frozen column cells
  .e-leftfreeze,
  .e-rightfreeze,
  .e-fixedfreeze {
    background-color: inherit !important;
  }
}

/* Header */
.e-grid .e-gridheader {
  background: var(--bs-secondary-bg) !important;
  border-bottom: 1px solid var(--border-color) !important;

  .e-headercell {
    background-color: var(--bs-secondary-bg) !important;
    color: var(--bs-body-color) !important;
    font-weight: 700 !important;
    text-transform: uppercase !important;
    font-size: 0.875rem !important;
    padding: 0.75rem 0.5rem !important;
    border-right: 1px solid rgba(var(--bs-border-color-rgb), 0.3) !important;

    &:last-child {
      border-right: none !important;
    }
  }

  .e-headercelldiv {
    font-weight: 700 !important;
  }
}

/* Grid Content */
.e-grid .e-gridcontent {
  background: var(--bs-body-bg) !important;

  .e-row {
    background: var(--bs-body-bg) !important;
    border-bottom: 1px solid rgba(var(--bs-border-color-rgb), 0.2) !important;

    &:hover {
      background: rgba(var(--bs-primary-rgb), 0.05) !important;
    }

    &.e-altrow {
      background: var(--bs-tertiary-bg) !important;

      &:hover {
        background: rgba(var(--bs-primary-rgb), 0.08) !important;
      }
    }
  }

  .e-rowcell {
    padding: 0.75rem 0.5rem !important;
    color: var(--bs-body-color) !important;
    background-color: inherit !important;
    border-right: 1px solid rgba(var(--bs-border-color-rgb), 0.1) !important;
    font-size: 0.875rem !important;

    &:last-child {
      border-right: none !important;
    }
  }
}

/* Footer / Aggregates */
.e-grid .e-gridfooter {
  background: var(--bs-body-bg) !important;
  border-top: 2px solid var(--bs-border-color) !important;
  font-weight: 700 !important;

  .e-summaryrow {
    background: var(--bs-body-bg) !important;

    .e-summarycell {
      color: var(--bs-body-color) !important;
      background-color: var(--bs-body-bg) !important;
      font-weight: 700 !important;
      padding: 0.75rem 0.5rem !important;
      border-right: 1px solid rgba(var(--bs-border-color-rgb), 0.3) !important;

      &:last-child {
        border-right: none !important;
      }
    }
  }
}

/* Toolbar */
.e-grid .e-toolbar {
  background: var(--bs-secondary-bg) !important;
  border-bottom: 1px solid var(--border-color) !important;
  padding: 0.5rem !important;

  .e-toolbar-items {
    .e-toolbar-item {

      button.e-tbar-btn,
      .e-tbar-btn {
        background-color: var(--bs-primary) !important;
        background: var(--bs-primary) !important;
        color: var(--bs-light) !important;
        border: none !important;
        border-radius: var(--bs-border-radius) !important;
        padding: 0.375rem 0.75rem !important;
        font-weight: 600 !important;
        transition: all 0.2s ease !important;

        &:hover,
        &.e-hover {
          background-color: var(--bs-primary) !important;
          background: var(--bs-primary) !important;
          color: var(--bs-light) !important;
          opacity: 0.9 !important;
          box-shadow: var(--bs-box-shadow-sm) !important;
        }

        &:focus,
        &.e-focus {
          background-color: var(--bs-primary) !important;
          background: var(--bs-primary) !important;
          color: var(--bs-light) !important;
          outline: none !important;
          box-shadow: 0 0 0 0.2rem rgba(var(--bs-primary-rgb), 0.25) !important;
        }

        &:active,
        &.e-active {
          background-color: var(--bs-primary) !important;
          background: var(--bs-primary) !important;
          color: var(--bs-light) !important;
          opacity: 0.95 !important;
        }

        .e-tbar-btn-text {
          color: var(--bs-light) !important;
        }

        .e-icons,
        .e-btn-icon {
          color: var(--bs-light) !important;
        }
      }
    }
  }
}

/* Sorted / Focused Header Cells â€“ keep text readable in dark mode */
.e-grid .e-gridheader {

  .e-headercell.e-ascending,
  .e-headercell.e-descending,
  .e-headercell.e-focus,
  .e-headercell.e-focused,
  .e-headercell.e-mousepointer {
    background-color: var(--bs-secondary-bg) !important;
    color: var(--bs-body-color) !important;

    .e-headercelldiv,
    .e-headercelldiv .e-headertext {
      color: var(--bs-body-color) !important;
    }

    .e-sortfilterdiv,
    .e-icons,
    .e-icon-ascending,
    .e-icon-descending {
      color: var(--bs-primary) !important;
    }
  }
}

/* Sort Icons */
.e-grid .e-sortnumber {
  background: var(--bs-primary) !important;
  color: var(--bs-light) !important;
}

.e-grid .e-sortfilterdiv {
  color: var(--bs-primary) !important;
}

.e-grid .e-icon-ascending,
.e-grid .e-icon-descending {
  color: var(--bs-primary) !important;
}

/* Filter Bar */
.e-grid .e-filterbar {
  .e-filterbarcell {
    background: rgba(var(--bs-primary-rgb), 0.05) !important;
    border-bottom: 1px solid var(--border-color) !important;

    input {
      background: var(--bs-body-bg) !important;
      border: 1px solid var(--border-color) !important;
      border-radius: var(--bs-border-radius) !important;
      color: var(--bs-body-color) !important;
      padding: 0.375rem 0.5rem !important;
      font-size: 0.875rem !important;

      &:focus {
        border-color: var(--bs-primary) !important;
        box-shadow: 0 0 0 0.2rem rgba(var(--bs-primary-rgb), 0.25) !important;
      }
    }
  }
}

/* Pager */
.e-grid .e-gridpager {
  background: var(--bs-body-bg) !important;
  border-top: 1px solid var(--bs-border-color) !important;
  padding: 0.75rem !important;
  color: var(--bs-body-color) !important;

  .e-pagercontainer {
    background: transparent !important;

    .e-numericcontainer {
      .e-numericitem {
        background: transparent !important;
        color: var(--bs-body-color) !important;
        border: 1px solid var(--bs-border-color) !important;
        border-radius: var(--bs-border-radius) !important;

        &:hover {
          background: rgba(var(--bs-primary-rgb), 0.1) !important;
        }

        &.e-currentitem {
          background: var(--bs-primary) !important;
          color: #fff !important;
          border-color: var(--bs-primary) !important;
        }
      }
    }

    // Nav buttons (first, prev, next, last)
    .e-first,
    .e-prev,
    .e-next,
    .e-last,
    .e-pp,
    .e-np {
      background: transparent !important;
      color: var(--bs-body-color) !important;
      border: 1px solid var(--bs-border-color) !important;
      border-radius: var(--bs-border-radius) !important;

      &:hover {
        background: rgba(var(--bs-primary-rgb), 0.1) !important;
        color: var(--bs-primary) !important;
      }

      &.e-disable {
        opacity: 0.4 !important;
      }
    }

    .e-icons {
      color: var(--bs-body-color) !important;
    }
  }

  // Page info text ("1 of 250 pages (5,000 items)")
  .e-parentmsgbar,
  .e-pagecountmsg,
  .e-pagesizes {
    color: var(--bs-body-color) !important;
    opacity: 0.8;
  }
}

/* Mobile Responsive Adjustments */
@media (max-width: 575.98px) {
  .e-grid {

    .e-gridheader .e-headercell,
    .e-gridcontent .e-rowcell {
      font-size: 0.6875rem !important;
      padding: 0.5rem 0.25rem !important;
    }
  }
}

/* ============================================
   Global Export Button Pattern (icon-only)
   Applies across views for consistent look/feel
   ============================================ */
.export-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.25rem;
  /* compact footprint */
  width: 1.75rem;
  height: 1.75rem;
  border-radius: var(--bs-border-radius);
}

.export-icon {
  display: inline-block;
  line-height: 1;
  transform: scale(1.25);
  transform-origin: center;
}

@media (max-width: 575.98px) {
  .export-icon {
    transform: scale(1.35);
  }
}

/* Color-coded Cells (for currency amounts) */
.e-grid {
  .text-warning {
    color: var(--bs-warning) !important;
  }

  .text-success {
    color: var(--bs-success) !important;
  }

  .text-danger {
    color: var(--bs-danger) !important;
  }

  .text-muted {
    color: var(--bs-secondary) !important;
  }

  .fw-semibold {
    font-weight: 600 !important;
  }
}

/* Empty State */
.e-grid .e-emptyrow {
  background: transparent !important;

  td {
    color: var(--bs-secondary) !important;
    text-align: center !important;
    padding: 3rem 1rem !important;
  }
}

/* Tight Table Density - for production-matching compact tables */
.e-grid.tight-table {
  /* Grid and content background - theme aware */
  background-color: var(--bs-body-bg) !important;
  color: var(--bs-body-color);

  .e-gridcontent,
  .e-content,
  .e-headercontent,
  .e-gridfooter {
    background-color: var(--bs-body-bg) !important;
  }

  /* Excel Export toolbar styling */
  .e-toolbar,
  .e-toolbar.e-control {
    min-height: 36px !important;
    padding: 4px 8px !important;
    background: transparent !important;
  }

  .e-toolbar .e-toolbar-items,
  .e-toolbar .e-toolbar-left {
    gap: 8px;
  }

  /* Excel Export button - compact and theme-aware */
  .e-toolbar .e-btn,
  .e-toolbar .e-tbar-btn {
    padding: 4px 12px !important;
    font-size: 0.8125rem !important;
    min-height: 28px !important;
    height: 28px !important;
    line-height: 1.2 !important;
    background-color: var(--bs-secondary-bg) !important;
    color: var(--bs-body-color) !important;
    border: 1px solid var(--bs-border-color) !important;
    transition: all 0.2s ease;
  }

  .e-toolbar .e-btn:hover,
  .e-toolbar .e-tbar-btn:hover {
    background-color: var(--bs-tertiary-bg) !important;
    border-color: var(--bs-primary) !important;
    color: var(--bs-primary) !important;
  }

  .e-headercell {
    font-size: 0.8rem !important;
    padding: 4px 6px !important;
    line-height: 1.2 !important;
  }

  .e-headercelldiv {
    font-size: 0.8rem !important;
    line-height: 1.2 !important;
  }

  .e-gridcontent .e-rowcell {
    font-size: 0.8rem !important;
    padding: 4px 6px !important;
    line-height: 1.2 !important;
  }

  /* Mobile: even tighter */
  @media (max-width: 767.98px) {
    .e-headercell {
      font-size: 0.65rem !important;
      padding: 2px 4px !important;
      line-height: 1.1 !important;
      white-space: normal !important;
      word-wrap: break-word !important;
    }

    .e-headercelldiv {
      font-size: 0.65rem !important;
      line-height: 1.1 !important;
    }

    .e-gridcontent .e-rowcell {
      font-size: 0.75rem !important;
      padding: 2px 4px !important;
      line-height: 1.1 !important;
    }

    colgroup col {
      min-width: 45px !important;
    }
  }
}

/* ============================================
   Syncfusion DropDownList / AutoComplete
   Theme-aware overrides for dark mode support
   ============================================ */

/* Input wrapper */
.e-ddl.e-input-group,
.e-ddl.e-input-group.e-control-wrapper {
  background: var(--bs-body-bg) !important;
  border-color: var(--bs-border-color) !important;
  border-radius: var(--bs-border-radius) !important;

  input.e-input,
  .e-input {
    color: var(--bs-body-color) !important;
    background: transparent !important;
  }

  .e-input-group-icon {
    color: var(--bs-body-color) !important;
    background: transparent !important;
  }

  &.e-input-focus,
  &:focus-within {
    border-color: var(--bs-primary) !important;
    box-shadow: 0 0 0 0.2rem rgba(var(--bs-primary-rgb), 0.2) !important;
  }
}

/* Popup container (dropdown list, filter bar, list items) */
.e-popup.e-ddl,
.e-popup.e-dropdown-popup {
  background: var(--bs-body-bg) !important;
  border: 1px solid var(--bs-border-color) !important;
  border-radius: var(--bs-border-radius) !important;
  box-shadow: var(--bs-box-shadow) !important;

  /* Filter search bar inside the popup */
  .e-filter-parent,
  .e-input-filter {
    background: var(--bs-body-bg) !important;
    border-bottom: 1px solid var(--bs-border-color) !important;

    input,
    .e-input {
      background: var(--bs-secondary-bg) !important;
      color: var(--bs-body-color) !important;
      border: 1px solid var(--bs-border-color) !important;
      border-radius: var(--bs-border-radius) !important;

      &::placeholder {
        color: var(--bs-secondary-color) !important;
      }
    }
  }

  /* List items */
  .e-list-parent .e-list-item,
  .e-dropdownbase .e-list-item {
    background: var(--bs-body-bg) !important;
    color: var(--bs-body-color) !important;
    border-bottom: 1px solid rgba(var(--bs-border-color-rgb), 0.15);

    &:last-child {
      border-bottom: none;
    }

    &:hover,
    &.e-hover {
      background: rgba(var(--bs-primary-rgb), 0.08) !important;
      color: var(--bs-body-color) !important;
    }

    &.e-active,
    &.e-item-focus {
      background: rgba(var(--bs-primary-rgb), 0.15) !important;
      color: var(--bs-primary) !important;
    }
  }

  /* "No records found" text */
  .e-nodata {
    color: var(--bs-secondary-color) !important;
  }
}
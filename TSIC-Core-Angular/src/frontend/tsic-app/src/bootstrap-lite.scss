// bootstrap-lite.scss
// Minimal utility subset to allow progressive removal of full Bootstrap CSS.
// Only includes spacing, flex, alignment, visibility helpers and a few structural classes
// used heavily in wizards/components. Extend incrementally as legacy classes are replaced.
// NOTE: Does NOT include full reboot, grid, alerts, badges, cards, buttons, forms.
// Keep surface area intentionally tiny.

@use 'sass:map';
@use 'sass:math';

// Spacing scale (match Bootstrap defaults)
$spacer: 1rem;
$spacers: (
    0: 0,
    1: $spacer * .25,
    2: $spacer * .5,
    3: $spacer * 1,
    4: $spacer * 1.5,
    5: $spacer * 3
);

@function spacer($i) {
    @return map.get($spacers, $i);
}

// Generate margin/padding utilities we actively use (t, b, y, x, s, e)
@mixin space-utils($prop, $abbr) {
    @each $i, $val in $spacers {
        .#{$abbr}t-#{$i} {
            #{$prop}-top: $val !important;
        }

        .#{$abbr}b-#{$i} {
            #{$prop}-bottom: $val !important;
        }

        .#{$abbr}y-#{$i} {
            #{$prop}-top: $val !important;
            #{$prop}-bottom: $val !important;
        }

        .#{$abbr}x-#{$i} {
            #{$prop}-left: $val !important;
            #{$prop}-right: $val !important;
        }

        .#{$abbr}s-#{$i} {
            #{$prop}-left: $val !important;
        }

        .#{$abbr}e-#{$i} {
            #{$prop}-right: $val !important;
        }

        .#{$abbr}m-#{$i} {
            #{$prop}: $val !important;
        }

        // whole property (rare)
    }
}

@include space-utils(margin, m);
@include space-utils(padding, p);

// Flex + alignment utilities
.d-flex {
    display: flex !important;
}

.flex-column {
    flex-direction: column !important;
}

.flex-row {
    flex-direction: row !important;
}

.justify-content-center {
    justify-content: center !important;
}

.justify-content-between {
    justify-content: space-between !important;
}

.align-items-center {
    align-items: center !important;
}

.gap-1 {
    gap: spacer(1) !important;
}

.gap-2 {
    gap: spacer(2) !important;
}

.gap-3 {
    gap: spacer(3) !important;
}

.gap-4 {
    gap: spacer(4) !important;
}

// Width + text helpers
.w-100 {
    width: 100% !important;
}

.text-center {
    text-align: center !important;
}

// Visibility helper (Bootstrap's visually-hidden)
.visually-hidden {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
}

// Simple border + rounded (subset)
.border {
    border: 1px solid var(--mat-divider-color, rgba(0, 0, 0, .12)) !important;
}

.border-top {
    border-top: 1px solid var(--mat-divider-color, rgba(0, 0, 0, .12)) !important;
}

.rounded {
    border-radius: .375rem !important;
}

.rounded-1 {
    border-radius: .25rem !important;
}

// Utility shims for classes we plan to eliminate but still referenced short-term
.fw-semibold {
    font-weight: 600 !important;
}

.small {
    font-size: .875em !important;
}

.opacity-75 {
    opacity: .75 !important;
}

// Placeholder card/alert minimal wrappers (non-invasive). Real replacements will move to Material components.
.card {
    background: var(--mat-app-background, #fff);
    border: 1px solid var(--mat-divider-color, rgba(0, 0, 0, .12));
    border-radius: .75rem;
}

.card-body {
    padding: spacer(3);
}

.card-header {
    padding: spacer(3);
}

.alert {
    padding: spacer(2) spacer(3);
    border-radius: .5rem;
}

.alert-info {
    background: #e8f4fd;
    color: #055160;
}

.alert-danger {
    background: #fdecea;
    color: #611a15;
}

.alert-secondary {
    background: #f2f3f5;
    color: #444;
}

.alert-success {
    background: #edf7ed;
    color: #0a4b25;
}

.alert-warning {
    background: #fff4e5;
    color: #613200;
}

.badge {
    display: inline-block;
    padding: .35em .6em;
    font-size: .75em;
    font-weight: 600;
    line-height: 1;
    border-radius: .5rem;
}

.bg-success {
    background: #198754;
    color: #fff;
}

.bg-secondary {
    background: #6c757d;
    color: #fff;
}

.bg-info-subtle {
    background: #dbeafe;
    color: #084298;
}

.bg-warning-subtle {
    background: #fff3cd;
    color: #664d03;
}

.bg-danger-subtle {
    background: #f8d7da;
    color: #58151c;
}

.bg-primary-subtle {
    background: #e0e7ff;
    color: #1d3b8d;
}

// List group minimal styling (used in Add Children step)
.list-group {
    list-style: none;
    margin: 0;
    padding: 0;
}

.list-group-item {
    padding: .75rem 1rem;
    border: 1px solid var(--mat-divider-color, rgba(0, 0, 0, .12));
    display: flex;
    gap: .75rem;
    align-items: flex-start;
}

.list-group-item+.list-group-item {
    margin-top: -1px;
}

// Utility to highlight pulsing button (legacy class hook)
.pulsing-button {
    position: relative;
}

.pulsing-button.apply-pulse {
    animation: pulse-bg 1.5s infinite;
}

@keyframes pulse-bg {
    0% {
        box-shadow: 0 0 0 0 rgba(25, 118, 210, .5);
    }

    70% {
        box-shadow: 0 0 0 10px rgba(25, 118, 210, 0);
    }

    100% {
        box-shadow: 0 0 0 0 rgba(25, 118, 210, 0);
    }
}

// TODO: As Bootstrap dependencies shrink, move remaining semantic components to dedicated Material wrappers and delete unused classes.
// --- Layout container replacements (pilot) ---
// Provide lightweight responsive container & centered column to replace .container + .row + .col-* constructs.
.layout-container {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
    max-width: 100%;
}

@media (min-width: 576px) {
    .layout-container {
        max-width: 540px;
    }
}

@media (min-width: 768px) {
    .layout-container {
        max-width: 720px;
    }
}

@media (min-width: 992px) {
    .layout-container {
        max-width: 960px;
    }
}

@media (min-width: 1200px) {
    .layout-container {
        max-width: 1140px;
    }
}

@media (min-width: 1400px) {
    .layout-container {
        max-width: 1320px;
    }
}

// Centered narrow column approximating col-lg-9 col-xl-8 for wizard shells
.layout-center-col {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    /* Progressive max widths matching original proportions */
    max-width: 100%;
}

@media (min-width: 992px) {
    .layout-center-col {
        max-width: 720px;
    }
}

// 9/12 of 960
@media (min-width: 1200px) {
    .layout-center-col {
        max-width: 760px;
    }
}

// ~8/12 of 1140
@media (min-width: 1400px) {
    .layout-center-col {
        max-width: 840px;
    }
}

// Generic responsive grid utility (simple) for future replacements
.grid {
    display: grid;
    gap: 1rem;
}

.grid.cols-2 {
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
}

.grid.cols-3 {
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
}

// --- Minimal grid shim for Bootstrap-like row/col classes ---
.row {
    display: flex;
    flex-wrap: wrap;
    gap: 0;
    /* use g-* helpers for spacing */
}

// Gutters via gap helpers
.g-0 {
    gap: 0 !important;
}

.g-1 {
    gap: spacer(1) !important;
}

.g-2 {
    gap: spacer(2) !important;
}

.g-3 {
    gap: spacer(3) !important;
}

.g-4 {
    gap: spacer(4) !important;
}

// Base column padding kept minimal; using gap for gutters
[class^="col-"],
[class*=" col-"] {
    box-sizing: border-box;
}

@mixin make-col($n) {
    flex: 0 0 auto;
    width: math.div(100% * $n, 12);
}

@mixin cols($prefix: '') {
    .#{$prefix}col-1 {
        @include make-col(1);
    }

    .#{$prefix}col-2 {
        @include make-col(2);
    }

    .#{$prefix}col-3 {
        @include make-col(3);
    }

    .#{$prefix}col-4 {
        @include make-col(4);
    }

    .#{$prefix}col-5 {
        @include make-col(5);
    }

    .#{$prefix}col-6 {
        @include make-col(6);
    }

    .#{$prefix}col-7 {
        @include make-col(7);
    }

    .#{$prefix}col-8 {
        @include make-col(8);
    }

    .#{$prefix}col-9 {
        @include make-col(9);
    }

    .#{$prefix}col-10 {
        @include make-col(10);
    }

    .#{$prefix}col-11 {
        @include make-col(11);
    }

    .#{$prefix}col-12 {
        @include make-col(12);
    }
}

// Default columns
@include cols();

// Responsive columns (subset of breakpoints)
@media (min-width: 576px) {
    @include cols('sm-');
}

@media (min-width: 768px) {
    @include cols('md-');
}

@media (min-width: 992px) {
    @include cols('lg-');
}

@media (min-width: 1200px) {
    @include cols('xl-');
}